<% content_for(:title, @list.name) %>

<h2><%= @list.name %>
  <span>
    (<%= pluralize(@list.movies.size, "Movie") %>)
    <icon class="<%= public_private_indicator(@list) %>"><icon>
  </span>
</h2>
<p>by <%= @list.owner.username %></p>

<% if @list.description.present? %>
  <p><%= @list.description %></p>
<% end %>

<%= form_tag user_list_path(@list.owner, @list), { method: :get, data: { controller: 'auto-submit', action: 'input->auto-submit#submit' } } do %>
  <%= select_tag :sort_by, options_for_select(MovieDataService::LIST_SORT_OPTIONS, @sort_by), {  include_blank: "Sort by" } %>
<% end %>

<% if @sort_by.present? && @list.members.present? && @watched_sorts.include?(@sort_by) %>
  <%= form_tag user_list_path(@list.owner, @list), { method: :get, data: { controller: 'auto-submit', action: 'input->auto-submit#submit' } } do %>
    <%= select_tag :member, options_from_collection_for_select(@list.members, :id, :username, @member), { include_blank: "By which member?: " } %>
    <%= hidden_field_tag(:sort_by, @sort_by) %>
  <% end %>
<% end %>

<%= render partial: 'movies/movie_partial_loop', locals: { movies: @movies, list: @list } %>

<div class='text-center'><%= will_paginate @movies %></div>
