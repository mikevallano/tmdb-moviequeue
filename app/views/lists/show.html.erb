<p id="notice"><%= notice %></p>

<h2>List show page for <%= @list.name %>, owned by <%= @list.owner.username %></h2>


  <%= form_tag user_list_path(@list.owner, @list), method: :get do %>
    <%= label_tag :sort_by, "Sort by: " %>
    <%= select_tag :sort_by, options_for_select(Movie::LIST_SORT_OPTIONS, @sort_by), :include_blank => false, id: "list_sort_options" %>
    <%= submit_tag "Sort", id: "list_sort_button" %>
  <% end %>

<% if @sort_by == "watched movies" && @list.members.present? %>

  </br>
  <%= form_tag user_list_path(@list.owner, @list), method: :get do %>
    <%= label_tag :watched_by, "Watched by who?: " %>
    <%= select_tag :watched_by, options_from_collection_for_select(@list.members, :id, :username) %>
    <%= hidden_field_tag(:sort_by, "watched movies") %>
    <%= submit_tag "Sort", id: "list_sort_watched_by_button" %>
  <% end %>

<% end %> <!-- # if @sort_by = "watched movies" && @list.members.present? -->


<div id ="list_show_loop">

  <% @movies.each do |movie| %>

    <div id="movies_partial_<%= "#{movie.tmdb_id}" %>">
      <%= render partial: 'movies/movie', object: movie %>
    </div>

  <% end %> <!-- movies loop -->

</div>

<p><%= will_paginate @movies %></p>

<%= link_to 'Edit', edit_user_list_path(@list.owner, @list), id: "edit_list_link_list_show" %> |
<%= link_to 'Back', user_lists_path(current_user), id: "lists_index_link_list_show" %>

<p>Invite a user to this list!</p>
<%= form_for(Invite.new) do |f| %>

  <%= f.hidden_field :sender_id, value: current_user.id %>
  <%= f.hidden_field :list_id, value: @list.id %>

  <div class="field">
    <%= f.label :email %><br>
    <%= f.text_field :email %>
  </div>
  <div class="actions">
    <%= f.submit "Send invite", id: "send_invite_button_list_show" %>
  </div>
<% end %>
