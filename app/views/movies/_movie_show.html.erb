<p id="notice"><%= notice %></p>

  <%= image_tag "http://image.tmdb.org/t/p/w780#{@movie.backdrop_path}" if @movie.backdrop_path.present? %><br>
  <%= image_tag "http://image.tmdb.org/t/p/w150#{@movie.poster_path}" if @movie.poster_path.present? %>

  <p><strong>Release Date:</strong> <%= @movie.release_date %></p>
  <p><strong>Rated:</strong> <%= @movie.mpaa_rating %></p>
  <p><strong>TMDB Vote Average:</strong> <%= @movie.vote_average %></p>

  <p><strong>Genres:</strong>
    <% @movie.genres.each do |genre| %>
      <%= link_to "#{genre}", genre_path(genre), id: "genre_link_movie_show" %>
    <% end %>
  </p>

  <p><strong>Overview:</strong> <%= @movie.overview %></p>

  <p><strong>Actors:</strong>
    <% @movie.actors.first(5).each do |actor| %>
      <%= link_to "#{actor}", actor_search_path(actor: actor), id: "actor_link_movie_show" %>
    <% end %>
  </p>
  <p><%= link_to "Full cast", full_cast_path(tmdb_id: @movie.tmdb_id), id: "full_cast_link_movie_show" %>

  <p><strong>Director:</strong> <%= link_to "#{@movie.director}", director_search_path(director_id: @movie.director_id, name: @movie.director) %></p>

  <% if @production_companies.present? %> <!-- # if @production_companies.present? -->
    <p><strong>Production Companies:</strong>
    <% @production_companies.each do |company| %>
      <%= link_to "#{company[:name]}", discover_search_path(company: company[:id], sort_by: "release_date") %>
    <% end %> <!-- # production companies loop -->
    </p>
  <% end %> <!-- # if @production_companies.present? -->

  <!-- TODO: Refactor the shit out of this: -->
  <% @lists_except_movie = current_user.lists_except_movie(@movie) %>

    <div id="movie_tagged_<%= "#{@movie.tmdb_id}" %>">
      <%= render "movies/movie_tag", movie: @movie %>
    </div>

    <div id="movie_seen_<%= "#{@movie.tmdb_id}" %>">
      <%= render 'movies/movie_screening', movie: @movie %>
    </div>

    <% if @movie.in_db && @movie.lists.by_user(current_user).present? %>

      <div id="movie_on_lists_<%= "#{@movie.tmdb_id}" %>">
        <%= render 'movies/movie_on_lists', movie: @movie %>
      </div>

      <div id="movie_other_list_<%= "#{@movie.tmdb_id}" %>">
        <%= render 'movies/movie_add_to_another_list', movie: @movie %>
      </div>

    <% else %> <!-- # if @movie.in_db && @movie.lists.by_user(current_user).present? -->

      <div id="movie_add_to_first_list_<%= "#{@movie.tmdb_id}" %>">
       <%= render 'movies/movie_add_to_first_list', movie: @movie %>
      </div>

    <% end %> <!-- # if @movie.in_db && @movie.lists.by_user(current_user).present? -->

    <% if current_user.watched_movies.include?(@movie) %>

      <div id="movie_rated_<%= "#{@movie.tmdb_id}" %>">
        <%= render 'movies/movie_rating', movie: @movie %>
      </div>

      <div id="movie_reviewed_<%= "#{@movie.tmdb_id}" %>">
        <%= render 'movies/movie_review', movie: @movie %>
      </div>

    <% end %> <!-- # if (current_user.watched_movies.include?(movie)) -->


  <p>Trailer:</p>
  <% if @movie.trailer.present? %> <!-- #if trailer present -->
    <iframe width="560" height="315" src="https://www.youtube.com/embed/<%= @movie.trailer %>" frameborder="0" allowfullscreen></iframe>
  <% else %> <!-- #if trailer present -->
    <a href="https://www.youtube.com/results?search_query=<%= @movie.title %>+movie+official+trailer" target="_blank">Watch the Trailer</a>
  <% end %> <!-- #if trailer present -->
