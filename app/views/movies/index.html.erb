<% content_for(:title, "My Movies") %>
<p id="notice"><%= notice %></p>

<h1>Movies Index (My movies)</h1>
<p>This page shows current user's movies, which include movies on any/all lists.</p>
<% if @tag.present? %>
  <% if @list.present? %>
  <h3>Here are the movies tagged with: <%= "'#{@tag.name}' on #{@list.name}" %>. <%= link_to "Show all movies", movies_path, id: "movies_index_link_with_tag_and_list_movies_index" %></h3>
  <% else %>
  <h3>Here are the movies tagged with: <%= "'#{@tag.name}'" %>. <%= link_to "Show all movies", movies_path, id: "movies_index_link_with_tag_movies_index" %></h3>
  <% end %>
<% end %>

<!-- # sort form -->
<%= form_tag movies_path, method: :get do %>
  <%= label_tag :sort_by, "Sort by: " %>
  <%= select_tag :sort_by, options_for_select(Movie::MY_MOVIES_SORT_OPTIONS, @sort_by), :include_blank => false, id: "list_sort_options" %>
  <%= submit_tag "Sort", id: "sort_button_movies_index" %>
<% end %>

<div id ="movies_index_loop">

  <% @movies.each do |movie| %>

  <!-- MODAL TRIGGER -->
    <p><a href="#" data-toggle="modal" data-target="#myModal_<%= movie.id %>">
    <%= image_tag "http://image.tmdb.org/t/p/w154#{movie.poster_path}" if movie.poster_path.present? %></a></p>

    <div id="movies_partial_<%= "#{movie.tmdb_id}" %>">
      <%= render partial: 'movies/movie', object: movie %>
    </div>

  <% end %>

</div>

<p><%= will_paginate @movies %></p>

<br>